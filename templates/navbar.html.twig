<div class="navbar animate__animated">
	<div class="container">
		<div class="navbar-brand">
			<a href="{{path("app_index")}}">Morent</a>
		</div>
		<div class="search-bar">
			<input type="text" placeholder="Search something else" id="search"/>
			<i class="fi fi-rs-search"></i>
			<i class="fi fi-rs-settings-sliders"></i>
			<div class="car-search">
			</div>
		</div>
		<div class="settings">
			<div class="favorite">
				<a href="{{path("app_favorite")}}">
					<i class="fi fi-sr-heart"></i>
				</a>
			</div>
			<div class="notification">
				<a href="#">
					<i class="fi fi-sr-bell"></i>
				</a>
			</div>
			<div class="setting">
				<a href="{{path("app_settings")}}">
					<i class="fi fi-sr-settings"></i>
				</a>
			</div>
			<div class="user">
				{% if app.user %}
					{% if "ROLE_ADMIN" in app.user.roles  %}
						<a href="{{path("app_admin")}}">
							<i class="fi fi-sr-user"></i>
						</a>
					{% elseif "ROLE_USER" in app.user.roles %}
						<a href="{{path("app_account")}}">
							<i class="fi fi-sr-user"></i>
						</a>
					{% endif %}
				{% else %}
					<a href="{{path("app_login")}}">
						<i class="fi fi-sr-user"></i>
					</a>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% block globalscripts %}

	{# <script>
		let navbar = document.querySelector(".navbar");
		document.addEventListener("scroll",function(){
			if(scrollY > 200){
				navbar.classList.add("animate__fadeInDown");
				navbar.classList.add("fixed");
			}
			else{
				navbar.classList.remove("animate__fadeInDown");
				navbar.classList.remove("fixed");
			}
		});
	</script> #}

	<script>
	let carContainer = document.querySelector(".car-search");
	document.getElementById("search").addEventListener("input", function(){
		carContainer.style.display = "block";
		carContainer.innerHTML = "";
		if(this.value){

			fetch("/search", {
			method: "POST",
			 headers: {
        "Content-Type": "application/json" // Add this header
    	},
			body: JSON.stringify({prefix: this.value})
			}).then((response) => {
				return response.json();
			}).then(res => {
					res.forEach(car => {
						carContainer.innerHTML +=
						`
						<div class="car-item">
							<div class="row">
								<div class="col-lg-3">
									<img src="${car.img}" alt="">
								</div>
								<div class="col-lg-6">
									<a href="/car/${car.id}">${car.name}</a>
									<span>${car.type}</span>
								</div>
								<div class="col-lg-3">
									<h3>$${car.price}</h3>
								</div>
							</div>
						</div>
						`
					});
			});
		}
		else{
			carContainer.html = "";
			carContainer.style.display = "none";
		}
		
	});	

	</script>

{% endblock %}